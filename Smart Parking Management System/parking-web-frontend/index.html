<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>智能停车场管理系统</title>
    <!-- 引入Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- 引入自定义CSS -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
<div class="container mt-5">
    <h1 class="text-center">智能停车场管理系统</h1>

    <!-- 导航标签 -->
    <div class="mt-4">
        <ul class="nav nav-tabs">
            <li class="nav-item">
                <a class="nav-link active" onclick="openTab('parking-map')">车位地图</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" onclick="openTab('records')">停车记录</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" onclick="openTab('admin')">管理员中心</a>
            </li>
        </ul>

        <!-- 标签内容区 -->
        <div class="tab-content mt-3">
            <!-- 车位地图标签 -->
            <div id="parking-map" class="tab-pane active">
                <div class="alert alert-info mb-3" id="status-bar">
                    <span>空闲车位: <span id="free-count">20</span></span>
                    <span class="mx-3">总车位: 20</span>
                </div>
                <div class="row" id="parking-grid">
                    <!-- 车位将动态生成 -->
                </div>
            </div>

            <!-- 停车记录标签 -->
            <div id="records" class="tab-pane">
                <h2>停车记录</h2>
                <table class="table table-striped">
                    <thead>
                    <tr>
                        <th>记录ID</th>
                        <th>车牌号</th>
                        <th>车位号</th>
                        <th>入场时间</th>
                        <th>出场时间</th>
                        <th>费用</th>
                    </tr>
                    </thead>
                    <tbody id="records-table">
                    <!-- 记录将动态生成 -->
                    </tbody>
                </table>
            </div>

            <!-- 管理员中心标签 -->
            <div id="admin" class="tab-pane">
                <h2>管理员登录</h2>
                <div class="mb-3">
                    <input type="text" id="admin-username" class="form-control" placeholder="用户名">
                </div>
                <div class="mb-3">
                    <input type="password" id="admin-password" class="form-control" placeholder="密码">
                </div>
                <button class="btn btn-primary" onclick="adminLogin()">登录</button>
                <div id="login-message" class="mt-2"></div>

                <!-- 收费规则设置（初始隐藏） -->
                <div id="fee-rule-section" style="display: none; margin-top: 20px;">
                    <h3>收费规则设置</h3>
                    <div class="mb-3">
                        <label>基础价格(元/小时): </label>
                        <input type="number" step="0.01" id="base-price" class="form-control">
                    </div>
                    <div class="mb-3">
                        <label>免费时长(分钟): </label>
                        <input type="number" id="free-minutes" class="form-control">
                    </div>
                    <div class="mb-3">
                        <label>每日上限(元): </label>
                        <input type="number" step="0.01" id="daily-cap" class="form-control">
                    </div>
                    <button class="btn btn-success" onclick="updateFeeRule()">更新规则</button>
                    <div id="fee-rule-message" class="mt-2"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 入场弹窗 -->
<div id="in-modal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal('in-modal')">&times;</span>
        <h2>车辆入场</h2>
        <p>车位: <span id="modal-spot-number"></span></p>
        <input type="text" id="plate-number" class="form-control" placeholder="请输入车牌号">
        <button class="btn btn-primary mt-2" onclick="confirmParkIn()">确认入场</button>
    </div>
</div>

<!-- 出场弹窗 -->
<div id="out-modal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal('out-modal')">&times;</span>
        <h2>车辆出场</h2>
        <p>车位: <span id="out-spot-number"></span></p>
        <p>车牌号: <span id="out-plate-number"></span></p>
        <p>入场时间: <span id="out-entry-time"></span></p>
        <p>停车时长: <span id="out-duration"></span></p>
        <p>应付费用: <span id="out-payment"></span> 元</p>
        <button class="btn btn-primary mt-2" onclick="confirmParkOut()">确认出场</button>
    </div>
</div>

<!-- 引入Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- 引入业务逻辑JS -->
<script src="js/parking-service.js"></script>
<!-- 引入页面交互JS -->
<script src="js/parking-ui.js"></script>
</body>
</html>